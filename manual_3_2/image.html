{"id":"52","uid":"1","name":"image","title":"\u56fe\u50cf\u5904\u7406","category_id":"1","description":"","pid":"16","model_id":"2","root":"1","type":"1","position":"0","link_id":"0","cover_id":"0","display":"0","dateline":"0","attach":"0","view":"0","comment":"0","extend":"0","level":"82","create_time":"1381473600","update_time":"1389532018","status":"1","parse":"2","content":"<p>\u4f7f\u7528Think\\Image\u7c7b\u8fdb\u884c\u56fe\u50cf\u5904\u7406\u529f\u80fd\uff0c\u652f\u6301Gd\u5e93\u548cImagick\u5e93\uff0c\u5305\u62ec\u5bf9GIf\u56fe\u50cf\u5904\u7406\u7684\u652f\u6301\u3002<\/p>\n\n<h2>\u5b9e\u4f8b\u5316\u7c7b\u5e93<\/h2>\n\n<pre><code>$image = new \\Think\\Image(); \n<\/code><\/pre>\n\n<p>\u9ed8\u8ba4\u4f7f\u7528GD\u5e93\u8fdb\u884c\u56fe\u50cf\u64cd\u4f5c\uff0c\u5982\u679c\u9700\u8981\u4f7f\u7528Imagick\u5e93\u64cd\u4f5c\u7684\u8bdd\uff0c\u9700\u8981\u6539\u6210\uff1a<\/p>\n\n<pre><code>$image = new \\Think\\Image(\\Think\\Image::IMAGE_IMAGICK); \n\/\/ \u6216\u8005\u91c7\u7528\n$image = new \\Think\\Image('Imagick'); \n<\/code><\/pre>\n\n<h2>\u56fe\u50cf\u64cd\u4f5c<\/h2>\n\n<p>\u4e0b\u9762\u6765\u770b\u4e0b\u57fa\u7840\u7684\u56fe\u50cf\u64cd\u4f5c\u529f\u80fd\u7684\u4f7f\u7528\u65b9\u6cd5\u3002<\/p>\n\n<h3>\u6253\u5f00\u56fe\u50cf\u6587\u4ef6<\/h3>\n\n<p>\u5047\u8bbe\u5f53\u524d\u5165\u53e3\u6587\u4ef6\u76ee\u5f55\u4e0b\u9762\u6709\u4e00\u4e2a1.jpg\u6587\u4ef6\uff0c\u5982\u56fe\u6240\u793a\uff1a<\/p>\n\n<p><img src=\"Uploads\/Editor\/2014-01-12\/52d298a804a30.jpg\" alt=\"1\" \/><\/p>\n\n<p>\u4f7f\u7528open\u65b9\u6cd5\u6253\u5f00\u56fe\u50cf\u6587\u4ef6\u8fdb\u884c\u76f8\u5173\u64cd\u4f5c\uff1a<\/p>\n\n<pre><code>$image = new \\Think\\Image(); \n$image-&gt;open('.\/1.jpg');\n<\/code><\/pre>\n\n<p>\u4e5f\u53ef\u4ee5\u7b80\u5316\u6210\u4e0b\u9762\u7684\u65b9\u5f0f\uff1a<\/p>\n\n<pre><code>$image = new \\Think\\Image(\\Think\\Image::IMAGE_GD,'.\/1.jpg'); \/\/ GD\u5e93\n\/\/ \u6216\u8005\n$image = new \\Think\\Image(\\Think\\Image::IMAGE_IMAGICK,'.\/1.jpg');  \/\/ imagick\u5e93\n<\/code><\/pre>\n\n<h3>\u83b7\u53d6\u56fe\u50cf\u4fe1\u606f<\/h3>\n\n<p>\u53ef\u4ee5\u83b7\u53d6\u6253\u5f00\u56fe\u7247\u7684\u4fe1\u606f\uff0c\u5305\u62ec\u56fe\u50cf\u5927\u5c0f\u3001\u7c7b\u578b\u7b49\uff0c\u4f8b\u5982\uff1a<\/p>\n\n<pre><code>$image = new \\Think\\Image(); \n$image-&gt;open('.\/1.jpg');\n$width = $image-&gt;width(); \/\/ \u8fd4\u56de\u56fe\u7247\u7684\u5bbd\u5ea6\n$height = $image-&gt;height(); \/\/ \u8fd4\u56de\u56fe\u7247\u7684\u9ad8\u5ea6\n$type = $image-&gt;type(); \/\/ \u8fd4\u56de\u56fe\u7247\u7684\u7c7b\u578b\n$mime = $image-&gt;mime(); \/\/ \u8fd4\u56de\u56fe\u7247\u7684mime\u7c7b\u578b\n$size = $image-&gt;size(); \/\/ \u8fd4\u56de\u56fe\u7247\u7684\u5c3a\u5bf8\u6570\u7ec4 0 \u56fe\u7247\u5bbd\u5ea6 1 \u56fe\u7247\u9ad8\u5ea6\n<\/code><\/pre>\n\n<h3>\u88c1\u526a\u56fe\u7247<\/h3>\n\n<p>\u4f7f\u7528crop\u548csave\u65b9\u6cd5\u5b8c\u6210\u88c1\u526a\u56fe\u7247\u529f\u80fd\u3002<\/p>\n\n<pre><code>$image = new \\Think\\Image(); \n$image-&gt;open('.\/1.jpg');\n\/\/\u5c06\u56fe\u7247\u88c1\u526a\u4e3a400x400\u5e76\u4fdd\u5b58\u4e3acorp.jpg\n$image-&gt;crop(400, 400)-&gt;save('.\/crop.jpg');\n<\/code><\/pre>\n\n<p>\u751f\u6210\u7684\u56fe\u7247\u5982\u56fe\uff1a<\/p>\n\n<p><img src=\"Uploads\/Editor\/2014-01-12\/52d298fb62dde.jpg\" alt=\"crop\" \/><\/p>\n\n<p>\u652f\u6301\u4ece\u67d0\u4e2a\u5750\u6807\u5f00\u59cb\u88c1\u526a\uff0c\u4f8b\u5982\u4e0b\u9762\u4ece\uff08100\uff0c30\uff09\u5f00\u59cb\u88c1\u526a\uff1a<\/p>\n\n<pre><code>$image = new \\Think\\Image(); \n$image-&gt;open('.\/1.jpg');\n\/\/\u5c06\u56fe\u7247\u88c1\u526a\u4e3a400x400\u5e76\u4fdd\u5b58\u4e3acorp.jpg\n$image-&gt;crop(400, 400,100,30)-&gt;save('.\/crop.jpg');\n<\/code><\/pre>\n\n<p>\u751f\u6210\u7684\u56fe\u7247\u5982\u56fe\uff1a<\/p>\n\n<p><img src=\"Uploads\/Editor\/2014-01-12\/52d2a494047e6.jpg\" alt=\"crop\" \/><\/p>\n\n<h3>\u751f\u6210\u7f29\u7565\u56fe<\/h3>\n\n<p>\u4f7f\u7528thumb\u65b9\u6cd5\u751f\u6210\u7f29\u7565\u56fe<\/p>\n\n<pre><code>$image = new \\Think\\Image(); \n$image-&gt;open('.\/1.jpg');\n\/\/ \u6309\u7167\u539f\u56fe\u7684\u6bd4\u4f8b\u751f\u6210\u4e00\u4e2a\u6700\u5927\u4e3a150*150\u7684\u7f29\u7565\u56fe\u5e76\u4fdd\u5b58\u4e3athumb.jpg\n$image-&gt;thumb(150, 150)-&gt;save('.\/thumb.jpg');\n<\/code><\/pre>\n\n<p>\u751f\u6210\u7684\u7f29\u7565\u56fe\u5982\u56fe\u6240\u793a\uff1a<\/p>\n\n<p><img src=\"Uploads\/Editor\/2014-01-12\/52d2998650c18.jpg\" alt=\"thumb\" \/><\/p>\n\n<p>\u6211\u4eec\u770b\u5230\u5b9e\u9645\u751f\u6210\u7684\u7f29\u7565\u56fe\u5e76\u4e0d\u662f150*150\uff0c\u56e0\u4e3a\u9ed8\u8ba4\u91c7\u7528\u539f\u56fe\u7b49\u6bd4\u4f8b\u7f29\u653e\u7684\u65b9\u5f0f\u751f\u6210\u7f29\u7565\u56fe\uff0c\u6700\u5927\u5bbd\u5ea6\u662f150\u3002<\/p>\n\n<p>\u53ef\u4ee5\u652f\u6301\u5176\u4ed6\u7c7b\u578b\u7684\u7f29\u7565\u56fe\u751f\u6210\uff0c\u8bbe\u7f6e\u5305\u62ecThink\\Image\u7684\u4e0b\u5217\u5e38\u91cf\u6216\u8005\u5bf9\u5e94\u7684\u6570\u5b57\uff1a<\/p>\n\n<pre><code>IMAGE_THUMB_SCALE     =   1 ; \/\/\u7b49\u6bd4\u4f8b\u7f29\u653e\u7c7b\u578b\nIMAGE_THUMB_FILLED    =   2 ; \/\/\u7f29\u653e\u540e\u586b\u5145\u7c7b\u578b\nIMAGE_THUMB_CENTER    =   3 ; \/\/\u5c45\u4e2d\u88c1\u526a\u7c7b\u578b\nIMAGE_THUMB_NORTHWEST =   4 ; \/\/\u5de6\u4e0a\u89d2\u88c1\u526a\u7c7b\u578b\nIMAGE_THUMB_SOUTHEAST =   5 ; \/\/\u53f3\u4e0b\u89d2\u88c1\u526a\u7c7b\u578b\nIMAGE_THUMB_FIXED     =   6 ; \/\/\u56fa\u5b9a\u5c3a\u5bf8\u7f29\u653e\u7c7b\u578b\n<\/code><\/pre>\n\n<p>\u4f8b\u5982\uff1a<\/p>\n\n<h4>\u5c45\u4e2d\u88c1\u526a<\/h4>\n\n<pre><code>$image = new \\Think\\Image(); \n$image-&gt;open('.\/1.jpg');\n\/\/ \u751f\u6210\u4e00\u4e2a\u5c45\u4e2d\u88c1\u526a\u4e3a150*150\u7684\u7f29\u7565\u56fe\u5e76\u4fdd\u5b58\u4e3athumb.jpg\n$image-&gt;thumb(150, 150,\\Think\\Image::IMAGE_THUMB_CENTER)-&gt;save('.\/thumb.jpg');\n<\/code><\/pre>\n\n<p>\u5c45\u4e2d\u88c1\u526a\u540e\u751f\u6210\u7684\u7f29\u7565\u56fe\u6548\u679c\u5982\u56fe\uff1a<\/p>\n\n<p><img src=\"Uploads\/Editor\/2014-01-12\/52d29a3f6f335.jpg\" alt=\"thumb\" \/><\/p>\n\n<h4>\u5de6\u4e0a\u89d2\u526a\u88c1<\/h4>\n\n<pre><code>$image = new \\Think\\Image(); \n$image-&gt;open('.\/1.jpg');\n\/\/ \u751f\u6210\u4e00\u4e2a\u5de6\u4e0a\u89d2\u88c1\u526a\u4e3a150*150\u7684\u7f29\u7565\u56fe\u5e76\u4fdd\u5b58\u4e3athumb.jpg\n$image-&gt;thumb(150, 150,\\Think\\Image::IMAGE_THUMB_NORTHWEST)-&gt;save('.\/thumb.jpg');\n<\/code><\/pre>\n\n<p>\u5de6\u4e0a\u89d2\u88c1\u526a\u540e\u751f\u6210\u7684\u7f29\u7565\u56fe\u6548\u679c\u5982\u56fe\uff1a<\/p>\n\n<p><img src=\"Uploads\/Editor\/2014-01-12\/52d29b906967e.jpg\" alt=\"thumb\" \/><\/p>\n\n<h4>\u7f29\u653e\u586b\u5145<\/h4>\n\n<pre><code>$image = new \\Think\\Image(); \n$image-&gt;open('.\/1.jpg');\n\/\/ \u751f\u6210\u4e00\u4e2a\u7f29\u653e\u540e\u586b\u5145\u5927\u5c0f150*150\u7684\u7f29\u7565\u56fe\u5e76\u4fdd\u5b58\u4e3athumb.jpg\n$image-&gt;thumb(150, 150,\\Think\\Image::IMAGE_THUMB_FILLED)-&gt;save('.\/thumb.jpg');\n<\/code><\/pre>\n\n<p>\u7f29\u653e\u586b\u5145\u540e\u751f\u6210\u7684\u7f29\u7565\u56fe\u6548\u679c\u5982\u56fe\uff1a<\/p>\n\n<p><img src=\"Uploads\/Editor\/2014-01-12\/52d29ae6a4999.jpg\" alt=\"thumb\" \/><\/p>\n\n<h4>\u56fa\u5b9a\u5927\u5c0f<\/h4>\n\n<pre><code>$image = new \\Think\\Image(); \n$image-&gt;open('.\/1.jpg');\n\/\/ \u751f\u6210\u4e00\u4e2a\u56fa\u5b9a\u5927\u5c0f\u4e3a150*150\u7684\u7f29\u7565\u56fe\u5e76\u4fdd\u5b58\u4e3athumb.jpg\n$image-&gt;thumb(150, 150,\\Think\\Image::IMAGE_THUMB_FIXED)-&gt;save('.\/thumb.jpg');\n<\/code><\/pre>\n\n<p>\u91c7\u7528\u56fa\u5b9a\u5927\u5c0f\u7684\u7f29\u7565\u56fe\u53ef\u80fd\u4f1a\u6709\u6240\u53d8\u5f62\uff0c\u751f\u6210\u7684\u7f29\u7565\u56fe\u6548\u679c\u5982\u56fe\uff1a<\/p>\n\n<p><img src=\"Uploads\/Editor\/2014-01-12\/52d29a7d1ee21.jpg\" alt=\"thumb\" \/><\/p>\n\n<h3>\u6dfb\u52a0\u56fe\u7247\u6c34\u5370<\/h3>\n\n<pre><code>$image = new \\Think\\Image(); \n$image-&gt;open('.\/1.jpg');\n\/\/\u5c06\u56fe\u7247\u88c1\u526a\u4e3a440x440\u5e76\u4fdd\u5b58\u4e3acorp.jpg\n$image-&gt;crop(440, 440)-&gt;save('.\/crop.jpg');\n\/\/ \u7ed9\u88c1\u526a\u540e\u7684\u56fe\u7247\u6dfb\u52a0\u56fe\u7247\u6c34\u5370\uff08\u6c34\u5370\u6587\u4ef6\u4f4d\u4e8e.\/logo.png\uff09\uff0c\u4f4d\u7f6e\u4e3a\u53f3\u4e0b\u89d2\uff0c\u4fdd\u5b58\u4e3awater.gif\n$image-&gt;water('.\/logo.png')-&gt;save(\"water.gif\");\n\/\/ \u7ed9\u539f\u56fe\u6dfb\u52a0\u6c34\u5370\u5e76\u4fdd\u5b58\u4e3awater_o.gif\uff08\u9700\u8981\u91cd\u65b0\u6253\u5f00\u539f\u56fe\uff09\n$image-&gt;open('.\/1.jpg')-&gt;water('.\/logo.png')-&gt;save(\"water_o.gif\"); \n<\/code><\/pre>\n\n<p>water\u65b9\u6cd5\u7684\u7b2c\u4e8c\u4e2a\u53c2\u6570\u8868\u793a\u6c34\u5370\u7684\u4f4d\u7f6e\uff0c\u53ef\u4ee5\u4f20\u5165\u4e0b\u5217Think\\Imag\u7c7b\u7684\u5e38\u91cf\u6216\u8005\u5bf9\u5e94\u7684\u6570\u5b57\uff1a<\/p>\n\n<pre><code>IMAGE_WATER_NORTHWEST =   1 ; \/\/\u5de6\u4e0a\u89d2\u6c34\u5370\nIMAGE_WATER_NORTH     =   2 ; \/\/\u4e0a\u5c45\u4e2d\u6c34\u5370\nIMAGE_WATER_NORTHEAST =   3 ; \/\/\u53f3\u4e0a\u89d2\u6c34\u5370\nIMAGE_WATER_WEST      =   4 ; \/\/\u5de6\u5c45\u4e2d\u6c34\u5370\nIMAGE_WATER_CENTER    =   5 ; \/\/\u5c45\u4e2d\u6c34\u5370\nIMAGE_WATER_EAST      =   6 ; \/\/\u53f3\u5c45\u4e2d\u6c34\u5370\nIMAGE_WATER_SOUTHWEST =   7 ; \/\/\u5de6\u4e0b\u89d2\u6c34\u5370\nIMAGE_WATER_SOUTH     =   8 ; \/\/\u4e0b\u5c45\u4e2d\u6c34\u5370\nIMAGE_WATER_SOUTHEAST =   9 ; \/\/\u53f3\u4e0b\u89d2\u6c34\u5370\n<\/code><\/pre>\n\n<p>\u4f8b\u5982\uff1a<\/p>\n\n<pre><code>$image = new \\Think\\Image(); \n\/\/ \u5728\u56fe\u7247\u5de6\u4e0a\u89d2\u6dfb\u52a0\u6c34\u5370\uff08\u6c34\u5370\u6587\u4ef6\u4f4d\u4e8e.\/logo.png\uff09 \u5e76\u4fdd\u5b58\u4e3awater.jpg\n$image-&gt;open('.\/1.jpg')-&gt;water('.\/logo.png',\\Think\\Image::IMAGE_WATER_NORTHWEST)-&gt;save(\"water.jpg\"); \n<\/code><\/pre>\n\n<p>\u751f\u6210\u7684\u56fe\u7247\u6548\u679c\u5982\u4e0b\uff1a<\/p>\n\n<p><img src=\"Uploads\/Editor\/2014-01-12\/52d2a1f833ba8.jpg\" alt=\"water\" \/><\/p>\n\n<p>\u8fd8\u53ef\u4ee5\u652f\u6301\u6c34\u5370\u56fe\u7247\u7684\u900f\u660e\u5ea6\uff080~100\uff0c\u9ed8\u8ba4\u503c\u662f80\uff09\uff0c\u4f8b\u5982\uff1a<\/p>\n\n<pre><code>$image = new \\Think\\Image(); \n\/\/ \u5728\u56fe\u7247\u5de6\u4e0a\u89d2\u6dfb\u52a0\u6c34\u5370\uff08\u6c34\u5370\u6587\u4ef6\u4f4d\u4e8e.\/logo.png\uff09 \u6c34\u5370\u56fe\u7247\u7684\u900f\u660e\u5ea6\u4e3a50 \u5e76\u4fdd\u5b58\u4e3awater.jpg\n$image-&gt;open('.\/1.jpg')-&gt;water('.\/logo.png',\\Think\\Image::IMAGE_WATER_NORTHWEST,50)-&gt;save(\"water.jpg\"); \n<\/code><\/pre>\n\n<p>\u751f\u6210\u7684\u6548\u679c\u5982\u4e0b\uff1a<\/p>\n\n<p><img src=\"Uploads\/Editor\/2014-01-12\/52d2a2b4715ad.jpg\" alt=\"water\" \/><\/p>\n\n<p>\u4e5f\u53ef\u4ee5\u652f\u6301\u7ed9\u56fe\u7247\u6dfb\u52a0\u6587\u5b57\u6c34\u5370\uff08\u5047\u8bbe\u5728\u5165\u53e3\u6587\u4ef6\u7684\u540c\u7ea7\u76ee\u5f55\u4e0b\u5b58\u57281.ttf\u5b57\u4f53\u6587\u4ef6\uff09\uff0c\u4f8b\u5982\uff1a<\/p>\n\n<pre><code>$image = new \\Think\\Image(); \n\/\/ \u5728\u56fe\u7247\u53f3\u4e0b\u89d2\u6dfb\u52a0\u6c34\u5370\u6587\u5b57 ThinkPHP \u5e76\u4fdd\u5b58\u4e3anew.jpg\n$image-&gt;open('.\/1.jpg')-&gt;text('ThinkPHP','.\/1.ttf',20,'#000000',\\Think\\Image::IMAGE_WATER_SOUTHEAST)-&gt;save(\"new.jpg\"); \n<\/code><\/pre>\n\n<p>\u751f\u6210\u7684\u56fe\u7247\u6548\u679c\uff1a<\/p>\n\n<p><img src=\"Uploads\/Editor\/2014-01-12\/52d29f071b68b.jpg\" alt=\"new\" \/><\/p>\n","template":""}