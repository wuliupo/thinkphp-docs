{"id":"29","uid":"1","name":"ajax_return","title":"AJAX\u8fd4\u56de","category_id":"1","description":"","pid":"9","model_id":"2","root":"1","type":"1","position":"0","link_id":"0","cover_id":"0","display":"0","dateline":"0","attach":"0","view":"0","comment":"0","extend":"0","level":"50","create_time":"1381472880","update_time":"1382255035","status":"1","parse":"0","content":"<p>ThinkPHP\u53ef\u4ee5\u5f88\u597d\u7684\u652f\u6301AJAX\u8bf7\u6c42\uff0c\u7cfb\u7edf\u7684\\Think\\Controller\u7c7b\u63d0\u4f9b\u4e86ajaxReturn\u65b9\u6cd5\u7528\u4e8eAJAX\u8c03\u7528\u540e\u8fd4\u56de\u6570\u636e\u7ed9\u5ba2\u6237\u7aef\u3002\u5e76\u4e14\u652f\u6301JSON\u3001JSONP\u3001XML\u548cEVAL\u56db\u79cd\u65b9\u5f0f\u7ed9\u5ba2\u6237\u7aef\u63a5\u53d7\u6570\u636e\uff0c\u5e76\u4e14\u652f\u6301\u914d\u7f6e\u5176\u4ed6\u65b9\u5f0f\u7684\u6570\u636e\u683c\u5f0f\u8fd4\u56de\u3002<\/p>\n\n<p>ajaxReturn\u65b9\u6cd5\u8c03\u7528\u793a\u4f8b\uff1a<\/p>\n\n<pre><code>$data = 'ok';\n$this-&gt;ajaxReturn($data);\n<\/code><\/pre>\n\n<p>\u652f\u6301\u8fd4\u56de\u6570\u7ec4\u6570\u636e\uff1a<\/p>\n\n<pre><code>$data['status']  = 1;\n$data['content'] = 'content';\n$this-&gt;ajaxReturn($data);\n<\/code><\/pre>\n\n<p>\u9ed8\u8ba4\u914d\u7f6e\u91c7\u7528JSON\u683c\u5f0f\u8fd4\u56de\u6570\u636e\uff08\u901a\u8fc7\u914d\u7f6eDEFAULT_AJAX_RETURN\u8fdb\u884c\u8bbe\u7f6e\uff09\uff0c\u6211\u4eec\u53ef\u4ee5\u6307\u5b9a\u683c\u5f0f\u8fd4\u56de\uff0c\u4f8b\u5982\uff1a<\/p>\n\n<pre><code>\/\/ \u6307\u5b9aXML\u683c\u5f0f\u8fd4\u56de\u6570\u636e\n$data['status']  = 1;\n$data['content'] = 'content';\n$this-&gt;ajaxReturn($data,'xml');\n<\/code><\/pre>\n\n<p>\u8fd4\u56de\u6570\u636edata\u53ef\u4ee5\u652f\u6301\u5b57\u7b26\u4e32\u3001\u6570\u5b57\u548c\u6570\u7ec4\u3001\u5bf9\u8c61\uff0c\u8fd4\u56de\u5ba2\u6237\u7aef\u7684\u65f6\u5019\u6839\u636e\u4e0d\u540c\u7684\u8fd4\u56de\u683c\u5f0f\u8fdb\u884c\u7f16\u7801\u540e\u4f20\u8f93\u3002\u5982\u679c\u662fJSON\/JSONP\u683c\u5f0f\uff0c\u4f1a\u81ea\u52a8\u7f16\u7801\u6210JSON\u5b57\u7b26\u4e32\uff0c\u5982\u679c\u662fXML\u65b9\u5f0f\uff0c\u4f1a\u81ea\u52a8\u7f16\u7801\u6210XML\u5b57\u7b26\u4e32\uff0c\u5982\u679c\u662fEVAL\u65b9\u5f0f\u7684\u8bdd\uff0c\u53ea\u4f1a\u8f93\u51fa\u5b57\u7b26\u4e32data\u6570\u636e\u3002<\/p>\n\n<blockquote>\n  <p>JSON\u548cJSONP\u867d\u7136\u53ea\u6709\u4e00\u4e2a\u5b57\u6bcd\u7684\u5dee\u522b\uff0c\u4f46\u5176\u5b9e\u4ed6\u4eec\u6839\u672c\u4e0d\u662f\u4e00\u56de\u4e8b\u513f\uff1aJSON\u662f\u4e00\u79cd\u6570\u636e\u4ea4\u6362\u683c\u5f0f\uff0c\u800cJSONP\u662f\u4e00\u79cd\u975e\u5b98\u65b9\u8de8\u57df\u6570\u636e\u4ea4\u4e92\u534f\u8bae\u3002\u4e00\u4e2a\u662f\u63cf\u8ff0\u4fe1\u606f\u7684\u683c\u5f0f\uff0c\u4e00\u4e2a\u662f\u4fe1\u606f\u4f20\u9012\u7684\u7ea6\u5b9a\u65b9\u6cd5\u3002<\/p>\n<\/blockquote>\n\n<p>\u9ed8\u8ba4\u7684JSONP\u683c\u5f0f\u8fd4\u56de\u7684\u5904\u7406\u65b9\u6cd5\u662f<code>jsonpReturn<\/code>\uff0c\u5982\u679c\u4f60\u91c7\u7528\u4e0d\u540c\u7684\u65b9\u6cd5\uff0c\u53ef\u4ee5\u8bbe\u7f6e\uff1a<\/p>\n\n<pre><code>'DEFAULT_JSONP_HANDLER' =&gt;  'myJsonpReturn', \/\/ \u9ed8\u8ba4JSONP\u683c\u5f0f\u8fd4\u56de\u7684\u5904\u7406\u65b9\u6cd5\n<\/code><\/pre>\n\n<p>\u6216\u8005\u76f4\u63a5\u5728\u9875\u9762\u4e2d\u7528callback\u53c2\u6570\u6765\u6307\u5b9a\u3002<\/p>\n\n<blockquote>\n  <p>\u9664\u4e86\u4e0a\u9762\u56db\u79cd\u8fd4\u56de\u7c7b\u578b\u5916\uff0c\u6211\u4eec\u8fd8\u53ef\u4ee5\u901a\u8fc7\u884c\u4e3a\u6269\u5c55\u6765\u589e\u52a0\u5176\u4ed6\u7c7b\u578b\u7684\u652f\u6301\uff0c\u53ea\u9700\u8981\u5bf9<code>ajax_return<\/code>\u6807\u7b7e\u4f4d\u8fdb\u884c\u884c\u4e3a\u7ed1\u5b9a\u5373\u53ef\u3002<\/p>\n<\/blockquote>\n","template":""}