{"id":"28","uid":"1","name":"page_jump_redirect","title":"\u8df3\u8f6c\u548c\u91cd\u5b9a\u5411","category_id":"1","description":"","pid":"9","model_id":"2","root":"1","type":"1","position":"0","link_id":"0","cover_id":"0","display":"0","dateline":"0","attach":"0","view":"0","comment":"0","extend":"0","level":"40","create_time":"1381472880","update_time":"1382255058","status":"1","parse":"0","content":"<h2>\u9875\u9762\u8df3\u8f6c<\/h2>\n\n<p>\u5728\u5e94\u7528\u5f00\u53d1\u4e2d\uff0c\u7ecf\u5e38\u4f1a\u9047\u5230\u4e00\u4e9b\u5e26\u6709\u63d0\u793a\u4fe1\u606f\u7684\u8df3\u8f6c\u9875\u9762\uff0c\u4f8b\u5982\u64cd\u4f5c\u6210\u529f\u6216\u8005\u64cd\u4f5c\u9519\u8bef\u9875\u9762\uff0c\u5e76\u4e14\u81ea\u52a8\u8df3\u8f6c\u5230\u53e6\u5916\u4e00\u4e2a\u76ee\u6807\u9875\u9762\u3002\u7cfb\u7edf\u7684\\Think\\Controller\u7c7b\u5185\u7f6e\u4e86\u4e24\u4e2a\u8df3\u8f6c\u65b9\u6cd5success\u548cerror\uff0c\u7528\u4e8e\u9875\u9762\u8df3\u8f6c\u63d0\u793a\uff0c\u800c\u4e14\u53ef\u4ee5\u652f\u6301ajax\u63d0\u4ea4\u3002<\/p>\n\n<p>\u4f7f\u7528\u65b9\u6cd5\u5f88\u7b80\u5355\uff0c\u4e3e\u4f8b\u5982\u4e0b\uff1a<\/p>\n\n<pre><code>$User = M('User'); \/\/\u5b9e\u4f8b\u5316User\u5bf9\u8c61\n$result = $User-&gt;add($data); \nif($result){\n    \/\/\u8bbe\u7f6e\u6210\u529f\u540e\u8df3\u8f6c\u9875\u9762\u7684\u5730\u5740\uff0c\u9ed8\u8ba4\u7684\u8fd4\u56de\u9875\u9762\u662f$_SERVER['HTTP_REFERER']\n    $this-&gt;success('\u65b0\u589e\u6210\u529f', 'User\/list');\n} else {\n    \/\/\u9519\u8bef\u9875\u9762\u7684\u9ed8\u8ba4\u8df3\u8f6c\u9875\u9762\u662f\u8fd4\u56de\u524d\u4e00\u9875\uff0c\u901a\u5e38\u4e0d\u9700\u8981\u8bbe\u7f6e\n    $this-&gt;error('\u65b0\u589e\u5931\u8d25');\n}\n<\/code><\/pre>\n\n<p>success\u548cerror\u65b9\u6cd5\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u8868\u793a\u63d0\u793a\u4fe1\u606f\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u8868\u793a\u8df3\u8f6c\u5730\u5740\uff0c\u7b2c\u4e09\u4e2a\u53c2\u6570\u662f\u8df3\u8f6c\u65f6\u95f4\uff08\u5355\u4f4d\u4e3a\u79d2\uff09\uff0c\u4f8b\u5982\uff1a<\/p>\n\n<pre><code>\/\/ \u64cd\u4f5c\u5b8c\u62103\u79d2\u540e\u8df3\u8f6c\u5230 \/Article\/index\n$this-&gt;success('\u64cd\u4f5c\u5b8c\u6210','\/Article\/index',3);\n\/\/ \u64cd\u4f5c\u5931\u8d255\u79d2\u540e\u8df3\u8f6c\u5230 \/Article\/error\n$this-&gt;error('\u64cd\u4f5c\u5931\u8d25','\/Article\/error',5);\n<\/code><\/pre>\n\n<p>\u8df3\u8f6c\u5730\u5740\u662f\u53ef\u9009\u7684\uff0csuccess\u65b9\u6cd5\u7684\u9ed8\u8ba4\u8df3\u8f6c\u5730\u5740\u662f<code>$_SERVER[\"HTTP_REFERER\"]<\/code>\uff0cerror\u65b9\u6cd5\u7684\u9ed8\u8ba4\u8df3\u8f6c\u5730\u5740\u662f<code>javascript:history.back(-1);<\/code>\u3002<\/p>\n\n<blockquote>\n  <p>\u9ed8\u8ba4\u7684\u7b49\u5f85\u65f6\u95f4success\u65b9\u6cd5\u662f1\u79d2\uff0cerror\u65b9\u6cd5\u662f3\u79d2<\/p>\n<\/blockquote>\n\n<p><code>success<\/code>\u548c<code>error<\/code>\u65b9\u6cd5\u90fd\u53ef\u4ee5\u5bf9\u5e94\u7684\u6a21\u677f\uff0c\u9ed8\u8ba4\u7684\u8bbe\u7f6e\u662f\u4e24\u4e2a\u65b9\u6cd5\u5bf9\u5e94\u7684\u6a21\u677f\u90fd\u662f\uff1a<\/p>\n\n<pre><code>\/\/\u9ed8\u8ba4\u9519\u8bef\u8df3\u8f6c\u5bf9\u5e94\u7684\u6a21\u677f\u6587\u4ef6\n'TMPL_ACTION_ERROR' =&gt; THINK_PATH . 'Tpl\/dispatch_jump.tpl',\n\/\/\u9ed8\u8ba4\u6210\u529f\u8df3\u8f6c\u5bf9\u5e94\u7684\u6a21\u677f\u6587\u4ef6\n'TMPL_ACTION_SUCCESS' =&gt; THINK_PATH . 'Tpl\/dispatch_jump.tpl',\n<\/code><\/pre>\n\n<p>\u4e5f\u53ef\u4ee5\u4f7f\u7528\u9879\u76ee\u5185\u90e8\u7684\u6a21\u677f\u6587\u4ef6<\/p>\n\n<pre><code>\/\/\u9ed8\u8ba4\u9519\u8bef\u8df3\u8f6c\u5bf9\u5e94\u7684\u6a21\u677f\u6587\u4ef6\n'TMPL_ACTION_ERROR' =&gt; 'Public:error';\n\/\/\u9ed8\u8ba4\u6210\u529f\u8df3\u8f6c\u5bf9\u5e94\u7684\u6a21\u677f\u6587\u4ef6\n'TMPL_ACTION_SUCCESS' =&gt; 'Public:success';\n<\/code><\/pre>\n\n<p>\u6a21\u677f\u6587\u4ef6\u53ef\u4ee5\u4f7f\u7528\u6a21\u677f\u6807\u7b7e\uff0c\u5e76\u4e14\u53ef\u4ee5\u4f7f\u7528\u4e0b\u9762\u7684\u6a21\u677f\u53d8\u91cf\uff1a\n<table>\n<thead>\n<tr>\n  <th>\u53d8\u91cf<\/th>\n  <th>\u542b\u4e49<\/th>\n<\/tr>\n<\/thead>\n<tbody>\n<tr>\n  <td>$msgTitle<\/td>\n  <td>\u64cd\u4f5c\u6807\u9898<\/td>\n<\/tr>\n<tr>\n  <td>$message<\/td>\n  <td>\u9875\u9762\u63d0\u793a\u4fe1\u606f<\/td>\n<\/tr>\n<tr>\n  <td>$status<\/td>\n  <td>\u64cd\u4f5c\u72b6\u6001 1\u8868\u793a\u6210\u529f 0 \u8868\u793a\u5931\u8d25 \u5177\u4f53\u8fd8\u53ef\u4ee5\u7531\u9879\u76ee\u672c\u8eab\u5b9a\u4e49\u89c4\u5219<\/td>\n<\/tr>\n<tr>\n  <td>$waitSecond<\/td>\n  <td>\u8df3\u8f6c\u7b49\u5f85\u65f6\u95f4 \u5355\u4f4d\u4e3a\u79d2<\/td>\n<\/tr>\n<tr>\n  <td>$jumpUrl<\/td>\n  <td>\u8df3\u8f6c\u9875\u9762\u5730\u5740<\/td>\n<\/tr>\n<\/tbody>\n<\/table><\/p>\n\n<p>success\u548cerror\u65b9\u6cd5\u4f1a\u81ea\u52a8\u5224\u65ad\u5f53\u524d\u8bf7\u6c42\u662f\u5426\u5c5e\u4e8eAjax\u8bf7\u6c42\uff0c\u5982\u679c\u5c5e\u4e8eAjax\u8bf7\u6c42\u5219\u4f1a\u8c03\u7528ajaxReturn\u65b9\u6cd5\u8fd4\u56de\u4fe1\u606f\u3002\najax\u65b9\u5f0f\u4e0b\u9762\uff0csuccess\u548cerror\u65b9\u6cd5\u4f1a\u5c01\u88c5\u4e0b\u9762\u7684\u6570\u636e\u8fd4\u56de\uff1a<\/p>\n\n<pre><code>$data['info']   =   $message; \/\/ \u63d0\u793a\u4fe1\u606f\u5185\u5bb9\n$data['status'] =   $status;  \/\/ \u72b6\u6001 \u5982\u679c\u662fsuccess\u662f1 error \u662f0\n$data['url']    =   $jumpUrl; \/\/ \u6210\u529f\u6216\u8005\u9519\u8bef\u7684\u8df3\u8f6c\u5730\u5740\n<\/code><\/pre>\n\n<h2>\u91cd\u5b9a\u5411<\/h2>\n\n<p>Controller\u7c7b\u7684redirect\u65b9\u6cd5\u53ef\u4ee5\u5b9e\u73b0\u9875\u9762\u7684\u91cd\u5b9a\u5411\u529f\u80fd\u3002<\/p>\n\n<p>redirect\u65b9\u6cd5\u7684\u53c2\u6570\u7528\u6cd5\u548cU\u51fd\u6570\u7684\u7528\u6cd5\u4e00\u81f4\uff08\u53c2\u8003<a href=\"#url_build\">URL\u751f\u6210<\/a>\u90e8\u5206\uff09\uff0c\u4f8b\u5982\uff1a<\/p>\n\n<pre><code>\/\/\u91cd\u5b9a\u5411\u5230New\u6a21\u5757\u7684Category\u64cd\u4f5c\n$this-&gt;redirect('New\/category', array('cate_id' =&gt; 2), 5, '\u9875\u9762\u8df3\u8f6c\u4e2d...');\n<\/code><\/pre>\n\n<p>\u4e0a\u9762\u7684\u7528\u6cd5\u662f\u505c\u75595\u79d2\u540e\u8df3\u8f6c\u5230New\u6a21\u5757\u7684category\u64cd\u4f5c\uff0c\u5e76\u4e14\u663e\u793a\u9875\u9762\u8df3\u8f6c\u4e2d\u5b57\u6837\uff0c\u91cd\u5b9a\u5411\u540e\u4f1a\u6539\u53d8\u5f53\u524d\u7684URL\u5730\u5740\u3002<\/p>\n\n<p>\u5982\u679c\u4f60\u4ec5\u4ec5\u662f\u60f3\u91cd\u5b9a\u5411\u8981\u4e00\u4e2a\u6307\u5b9a\u7684URL\u5730\u5740\uff0c\u800c\u4e0d\u662f\u5230\u67d0\u4e2a\u6a21\u5757\u7684\u64cd\u4f5c\u65b9\u6cd5\uff0c\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528<code>redirect<\/code>\u51fd\u6570\u91cd\u5b9a\u5411\uff0c\u4f8b\u5982\uff1a<\/p>\n\n<pre><code>\/\/\u91cd\u5b9a\u5411\u5230\u6307\u5b9a\u7684URL\u5730\u5740\nredirect('\/New\/category\/cate_id\/2', 5, '\u9875\u9762\u8df3\u8f6c\u4e2d...')\n<\/code><\/pre>\n\n<p>Redirect\u51fd\u6570\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u4e00\u4e2aURL\u5730\u5740\u3002<\/p>\n\n<blockquote>\n  <p>\u63a7\u5236\u5668\u7684redirect\u65b9\u6cd5\u548credirect\u51fd\u6570\u7684\u533a\u522b\u5728\u4e8e\u524d\u8005\u662f\u7528URL\u89c4\u5219\u5b9a\u4e49\u8df3\u8f6c\u5730\u5740\uff0c\u540e\u8005\u662f\u4e00\u4e2a\u7eaf\u7cb9\u7684URL\u5730\u5740\u3002<\/p>\n<\/blockquote>\n","template":""}