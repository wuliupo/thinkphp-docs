{"id":"24","uid":"1","name":"define_controller","title":"\u63a7\u5236\u5668\u5b9a\u4e49","category_id":"1","description":"","pid":"9","model_id":"2","root":"1","type":"1","position":"0","link_id":"0","cover_id":"0","display":"0","dateline":"0","attach":"0","view":"0","comment":"0","extend":"0","level":"100","create_time":"1381472880","update_time":"1382259152","status":"1","parse":"0","content":"<h2>\u63a7\u5236\u5668\u548c\u64cd\u4f5c<\/h2>\n\n<p>\u4e00\u822c\u6765\u8bf4\uff0cThinkPHP\u7684\u63a7\u5236\u5668\u662f\u4e00\u4e2a\u7c7b\uff0c\u800c\u64cd\u4f5c\u5219\u662f\u63a7\u5236\u5668\u7c7b\u7684\u4e00\u4e2a<strong>\u516c\u5171\u65b9\u6cd5<\/strong>\u3002<\/p>\n\n<p>\u4e0b\u9762\u5c31\u662f\u4e00\u4e2a\u5178\u578b\u7684\u63a7\u5236\u5668\u7c7b\u7684\u5b9a\u4e49\uff1a<\/p>\n\n<pre><code>&lt;?php\nnamespace Home\\Controller;\nuse Think\\Controller;\nclass IndexController extends Controller {\n    public function hello(){\n        echo 'hello,thinkphp!';\n    }\n}\n<\/code><\/pre>\n\n<p><code>Home\\IndexController<\/code>\u7c7b\u5c31\u4ee3\u8868\u4e86Home\u6a21\u5757\u4e0b\u7684Index\u63a7\u5236\u5668\uff0c\u800chello\u64cd\u4f5c\u5c31\u662f<code>Home\\IndexController<\/code>\u7c7b\u7684hello\uff08\u516c\u5171\uff09\u65b9\u6cd5\u3002<\/p>\n\n<p>\u5f53\u8bbf\u95ee <code>http:\/\/serverName\/index.php\/Home\/Index\/hello<\/code> \u540e\u4f1a\u8f93\u51fa\uff1a<\/p>\n\n<pre><code>hello,thinkphp!\n<\/code><\/pre>\n\n<blockquote>\n  <p>\u6ce8\u610f\uff1a\u5982\u679c\u4f60\u8bbe\u7f6e\u4e86\u64cd\u4f5c\u65b9\u6cd5\u7ed1\u5b9a\u5230\u7c7b\uff0c\u5219\u64cd\u4f5c\u65b9\u6cd5\u5bf9\u5e94\u4e86\u4e00\u4e2a\u7c7b\uff08\u53c2\u8003<a href=\"#action_bind_class\">\u64cd\u4f5c\u7ed1\u5b9a\u5230\u7c7b<\/a>\uff09\u3002<\/p>\n<\/blockquote>\n\n<h2>\u5b9a\u4e49\u63a7\u5236\u5668<\/h2>\n\n<p>\u63a7\u5236\u5668\u901a\u5e38\u9700\u8981\u7ee7\u627f\u7cfb\u7edf\u7684Controller\u7c7b\u6216\u8005\u5176\u5b50\u7c7b\uff0c\u4f8b\u5982\uff0c\u4e0b\u9762\u5b9a\u4e49\u4e86\u4e00\u4e2a <code>\\Home\\Controller\\IndexController<\/code> \u63a7\u5236\u5668\u7c7b\uff1a<\/p>\n\n<pre><code>&lt;?php\nnamespace Home\\Controller;\nuse Think\\Controller;\nclass IndexController extends Controller {\n    public function hello(){\n        echo 'hello';\n    }\n\n    public function test(){\n        echo 'test';\n    }\n}\n<\/code><\/pre>\n\n<p>\u63a7\u5236\u5668\u7684\u540d\u79f0\u91c7\u7528\u9a7c\u5cf0\u6cd5\u547d\u540d\uff08\u9996\u5b57\u6bcd\u5927\u5199\uff09\uff0c\u63a7\u5236\u5668\u6587\u4ef6\u4f4d\u4e8e <code>Home\/Controller\/IndexController.class.php<\/code>\u3002<\/p>\n\n<p>IndexController\u63a7\u5236\u5668\u7c7b\u7684hello\u548ctest\u65b9\u6cd5\u5c31\u662f\u64cd\u4f5c\u65b9\u6cd5\uff0c\u8bbf\u95ee\u4e0b\u9762\u7684URL\u5730\u5740\uff1a<\/p>\n\n<pre><code>http:\/\/serverName\/Home\/Index\/hello\nhttp:\/\/serverName\/Home\/Index\/test\n<\/code><\/pre>\n\n<p>\u4f1a\u5206\u522b\u8f93\u51fa\uff1a<\/p>\n\n<pre><code>hello\n\/\/ \u548c\ntest\n<\/code><\/pre>\n\n<p>\u64cd\u4f5c\u65b9\u6cd5\u7684\u5b9a\u4e49\u5fc5\u987b\u662f\u516c\u5171\u65b9\u6cd5\uff0c\u5426\u5219\u4f1a\u62a5\u64cd\u4f5c\u9519\u8bef\uff0c\u6240\u4ee5\uff0c\u4e0b\u9762\u7684\u64cd\u4f5c\u5b9a\u4e49\u53ea\u80fd\u8bbf\u95eehello\u64cd\u4f5c\uff0c\u800c\u4e0d\u80fd\u8bbf\u95eetest\u64cd\u4f5c\u3002<\/p>\n\n<pre><code>&lt;?php\nnamespace Home\\Controller;\nuse Think\\Controller;\nclass IndexController extends Controller {\n    public function hello(){\n        echo 'hello';\n    }\n\n    protected function test(){\n        echo 'test';\n    }\n}\n<\/code><\/pre>\n\n<p>\u56e0\u4e3a\u64cd\u4f5c\u65b9\u6cd5\u5c31\u662f\u63a7\u5236\u5668\u7684\u4e00\u4e2a\u65b9\u6cd5\uff0c\u6240\u4ee5\u9047\u5230\u6709\u548c\u7cfb\u7edf\u7684\u5173\u952e\u5b57\u51b2\u7a81\u7684\u65b9\u6cd5\u53ef\u80fd\u5c31\u4e0d\u80fd\u5b9a\u4e49\u4e86\uff0c\u8fd9\u4e2a\u65f6\u5019\u6211\u4eec\u53ef\u4ee5\u8bbe\u7f6e\u64cd\u4f5c\u65b9\u6cd5\u7684\u540e\u7f00\u6765\u89e3\u51b3\uff0c\u4f8b\u5982\uff1a<\/p>\n\n<pre><code>'ACTION_SUFFIX'         =&gt;  'Action', \/\/ \u64cd\u4f5c\u65b9\u6cd5\u540e\u7f00\n<\/code><\/pre>\n\n<p>\u8bbe\u7f6e\u64cd\u4f5c\u65b9\u6cd5\u7684\u540e\u7f00\u4e3aAction\uff0c\u8fd9\u6837\uff0c\u63a7\u5236\u5668\u7684\u64cd\u4f5c\u65b9\u6cd5\u5b9a\u4e49\u8c03\u6574\u4e3a\uff1a<\/p>\n\n<pre><code>&lt;?php\nnamespace Home\\Controller;\nuse Think\\Controller;\nclass IndexController extends Controller {\n    public function listAction(){\n        echo 'list';\n    }\n\n    public function helloAction(){\n        echo 'hello';\n    }\n\n    public function testAction(){\n        echo 'test';\n    }\n}\n<\/code><\/pre>\n\n<blockquote>\n  <p>\u64cd\u4f5c\u65b9\u6cd5\u7684\u540e\u7f00\u8bbe\u7f6e\u53ea\u662f\u5f71\u54cd\u63a7\u5236\u5668\u7c7b\u7684\u5b9a\u4e49\uff0c\u5bf9URL\u8bbf\u95ee\u6ca1\u6709\u5f71\u54cd\u3002<\/p>\n<\/blockquote>\n\n<h2>\u591a\u5c42\u63a7\u5236\u5668<\/h2>\n\n<p>ThinkPHP\u7684\u63a7\u5236\u5668\u652f\u6301\u591a\u5c42\u548c\u591a\u7ea7\uff0c\u591a\u5c42\u6307\u7684\u662f\u63a7\u5236\u5668\u53ef\u4ee5\u5206\u5c42\uff0c\u4f8b\u5982\u9664\u4e86\u9ed8\u8ba4\u7684Controller\u63a7\u5236\u5668\u5c42\uff08\u6211\u4eec\u53ef\u4ee5\u79f0\u4e4b\u4e3a\u8bbf\u95ee\u63a7\u5236\u5668\uff09\uff0c\u8fd8\u53ef\u4ee5\u6dfb\u52a0\u4e8b\u4ef6\u63a7\u5236\u5668\uff08\u5c42\uff09\uff0c\u4f8b\u5982\uff1a<\/p>\n\n<pre><code>\u251c\u2500Controller \u8bbf\u95ee\u63a7\u5236\u5668\n\u2502  \u251c\u2500UserController.class.php \n\u2502  \u251c\u2500BlogController.class.php\n\u2502  ...\n\u251c\u2500Event \u4e8b\u4ef6\u63a7\u5236\u5668\n\u2502  \u251c\u2500UserEvent.class.php  \n\u2502  \u251c\u2500BlogEvent.class.php\n\u2502  ...\n<\/code><\/pre>\n\n<blockquote>\n  <p>\u8bbf\u95ee\u63a7\u5236\u5668\u7684\u540d\u79f0\u662f\u901a\u8fc7<strong>DEFAULT_C_LAYER<\/strong>\u8bbe\u7f6e\u7684\uff0c\u9ed8\u8ba4\u662fController\u3002<\/p>\n<\/blockquote>\n\n<p>\u8bbf\u95ee\u63a7\u5236\u5668\u8d1f\u8d23\u5916\u90e8\u4ea4\u4e92\u54cd\u5e94\uff0c\u901a\u8fc7URL\u8bf7\u6c42\u54cd\u5e94\uff0c\u4f8b\u5982 <code>http:\/\/serverName\/Home\/User\/index<\/code>,\u800c\u4e8b\u4ef6\u63a7\u5236\u5668\u8d1f\u8d23\u5185\u90e8\u7684\u4e8b\u4ef6\u54cd\u5e94\uff0c\u5e76\u4e14\u53ea\u80fd\u5728\u5185\u90e8\u8c03\u7528\uff0c\u6240\u4ee5\u662f\u548c\u5916\u90e8\u9694\u79bb\u7684\u3002<\/p>\n\n<blockquote>\n  <p>\u591a\u5c42\u63a7\u5236\u5668\u7684\u5212\u5206\u53ef\u4ee5\u6839\u636e\u9879\u76ee\u7684\u9700\u8981\u81ea\u7531\u5206\u5c42\u3002<\/p>\n<\/blockquote>\n\n<p>\u5982\u679c\u662f\u5b9a\u4e49\u5176\u4ed6\u7684\u63a7\u5236\u5668\u5c42\uff0c\u5219\u4e0d\u4e00\u5b9a\u5fc5\u987b\u8981\u7ee7\u627f\u7cfb\u7edf\u7684Controller\u7c7b\u6216\u5176\u5b50\u7c7b\uff0c\u901a\u5e38\u9700\u8981\u8f93\u51fa\u6a21\u7248\u7684\u65f6\u5019\u624d\u9700\u8981\u7ee7\u627fController\u7c7b\u3002\u4f8b\u5982\uff1a<\/p>\n\n<pre><code>&lt;?php\nnamespace Home\\Event;\nclass UserEvent {\n    public function login(){\n        echo 'login event';\n    }\n\n    public function logout(){\n        echo 'logout event';\n    }\n}\n<\/code><\/pre>\n\n<p>UserEvent\u4e8b\u4ef6\u63a7\u5236\u5668\u4f4d\u4e8e <code>Home\/Event\/UserEvent.class.php<\/code> \u3002<\/p>\n\n<h2>\u591a\u7ea7\u63a7\u5236\u5668<\/h2>\n\n<p>\u591a\u7ea7\u63a7\u5236\u5668\u662f\u6307\u63a7\u5236\u5668\u53ef\u4ee5\u901a\u8fc7\u5b50\u76ee\u5f55\u628a\u67d0\u4e2a\u63a7\u5236\u5668\u5c42\u5206\u7ec4\u5b58\u653e\uff0c\u9996\u5148\u9700\u8981\u8bbe\u7f6e\u63a7\u5236\u5668\u7684\u5206\u7ea7\u5c42\u6b21\uff0c\u4f8b\u5982\uff0c\u6211\u4eec\u8bbe\u7f6e2\u7ea7\u76ee\u5f55\u7684\u63a7\u5236\u5668\u5c42\uff1a<\/p>\n\n<pre><code>'CONTROLLER_LEVEL'      =&gt;  2,\n<\/code><\/pre>\n\n<p>\u63a7\u5236\u5668\u6587\u4ef6\u7684\u4f4d\u7f6e\u653e\u7f6e\u5982\u4e0b\uff1a<\/p>\n\n<pre><code>\u251c\u2500Controller \u8bbf\u95ee\u63a7\u5236\u5668\n\u2502  \u251c\u2500User User\u5206\u7ea7\uff08\u7ec4\uff09\n\u2502  \u2502  \u251c\u2500UserTypeController.class.php \n\u2502  \u2502  \u251c\u2500UserAuthController.class.php \n\u2502  ...\n\u2502  \u251c\u2500Admin Admin\u5206\u7ea7\uff08\u7ec4\uff09\n\u2502  \u2502  \u251c\u2500UserController.class.php \n\u2502  \u2502  \u251c\u2500ConfigController.class.php \n\u2502  ...\n<\/code><\/pre>\n\n<p>\u591a\u7ea7\u63a7\u5236\u5668\u4e2d\u7684\u547d\u540d\u7a7a\u95f4\u9700\u8981\u8fd9\u6837\u5b9a\u4e49\uff1a<\/p>\n\n<pre><code>&lt;?php\nnamespace Home\\Controller\\Admin;\nuse Think\\Controller;\nclass IndexController extends Controller {\n    public function hello(){\n        echo 'hello';\n    }\n\n    public function test(){\n        echo 'test';\n    }\n}\n<\/code><\/pre>\n\n<p>\u7136\u540e\u5c31\u53ef\u4ee5\u901a\u8fc7URL\u5730\u5740\u8bbf\u95ee\uff1a<\/p>\n\n<pre><code>http:\/\/serverName\/Home\/User\/UserType\nhttp:\/\/serverName\/Home\/Admin\/User\n<\/code><\/pre>\n\n<blockquote>\n  <p>\u5982\u679c\u5e0c\u671b\u7b80\u5316URL\u5730\u5740\u4e2d\u7684\u6a21\u5757\u5730\u5740\uff0c\u53ef\u4ee5\u53c2\u8003 <a href=\"#module_deploy\">\u6a21\u5757\u90e8\u7f72<\/a><\/p>\n<\/blockquote>\n\n<h2>\u5b9e\u4f8b\u5316\u63a7\u5236\u5668<\/h2>\n\n<p>\u8bbf\u95ee\u63a7\u5236\u5668\u7684\u5b9e\u4f8b\u5316\u901a\u5e38\u662f\u81ea\u52a8\u5b8c\u6210\u7684\uff0c\u7cfb\u7edf\u4f1a\u6839\u636eURL\u5730\u5740\u89e3\u6790\u51fa\u8bbf\u95ee\u7684\u63a7\u5236\u5668\u540d\u79f0\u81ea\u52a8\u5b9e\u4f8b\u5316\uff0c\u5e76\u4e14\u8c03\u7528\u76f8\u5173\u7684\u64cd\u4f5c\u65b9\u6cd5\u3002<\/p>\n\n<p>\u5982\u679c\u4f60\u9700\u8981\u8de8\u63a7\u5236\u5668\u8c03\u7528\u7684\u8bdd\uff0c\u5219\u53ef\u4ee5\u5355\u72ec\u5b9e\u4f8b\u5316\uff1a<\/p>\n\n<pre><code>\/\/ \u5b9e\u4f8b\u5316Home\u6a21\u5757\u7684User\u63a7\u5236\u5668\n$User = new \\Home\\Controller\\UserController();\n\/\/ \u5b9e\u4f8b\u5316Admin\u6a21\u5757\u7684Blog\u63a7\u5236\u5668\n$Blog = new \\Admin\\Controller\\BlogController();\n<\/code><\/pre>\n\n<p>\u7cfb\u7edf\u4e3a\u4e0a\u9762\u7684\u63a7\u5236\u5668\u5b9e\u4f8b\u5316\u63d0\u4f9b\u4e86\u4e00\u4e2a\u5feb\u6377\u8c03\u7528\u65b9\u6cd5A\uff0c\u4e0a\u9762\u7684\u4ee3\u7801\u53ef\u4ee5\u7b80\u5316\u4e3a\uff1a<\/p>\n\n<pre><code>\/\/ \u5047\u8bbe\u5f53\u524d\u6a21\u5757\u662fHome\u6a21\u5757\n$User = A('User'); \n$Blog = A('Admin\/Blog');\n<\/code><\/pre>\n\n<p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cA\u65b9\u6cd5\u5b9e\u4f8b\u5316\u7684\u662f\u9ed8\u8ba4\u63a7\u5236\u5668\u5c42\uff08Controller\uff09\uff0c\u5982\u679c\u4f60\u8981\u5b9e\u4f8b\u5316\u5176\u4ed6\u7684\u5206\u5c42\u63a7\u5236\u5668\u7684\u8bdd\uff0c\u53ef\u4ee5\u4f7f\u7528\uff1a<\/p>\n\n<pre><code>\/\/ \u5047\u8bbe\u5f53\u524d\u6a21\u5757\u662fHome\u6a21\u5757\n\/\/ \u5b9e\u4f8b\u5316Event\u63a7\u5236\u5668\n$User = A('User','Event'); \n$Blog = A('Admin\/Blog','Event');\n<\/code><\/pre>\n\n<p>\u4e0a\u9762\u7684\u4ee3\u7801\u7b49\u6548\u4e8e\uff1a<\/p>\n\n<pre><code>\/\/ \u5b9e\u4f8b\u5316Home\u6a21\u5757\u7684User\u4e8b\u4ef6\u63a7\u5236\u5668\n$User = new \\Home\\Event\\UserEvent();\n\/\/ \u5b9e\u4f8b\u5316Admin\u6a21\u5757\u7684Blog\u4e8b\u4ef6\u63a7\u5236\u5668\n$Blog = new \\Admin\\Event\\BlogEvent();\n<\/code><\/pre>\n","template":""}