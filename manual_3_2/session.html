{"id":"45","uid":"1","name":"session","title":"SESSION\u652f\u6301","category_id":"1","description":"","pid":"16","model_id":"2","root":"1","type":"1","position":"0","link_id":"0","cover_id":"0","display":"0","dateline":"0","attach":"0","view":"0","comment":"0","extend":"0","level":"100","create_time":"1381473600","update_time":"1389531950","status":"1","parse":"2","content":"<p>\u7cfb\u7edf\u63d0\u4f9b\u4e86Session\u7ba1\u7406\u548c\u64cd\u4f5c\u7684\u5b8c\u5584\u652f\u6301\uff0c\u5168\u90e8\u64cd\u4f5c\u53ef\u4ee5\u901a\u8fc7\u4e00\u4e2a\u5185\u7f6e\u7684session\u51fd\u6570\u5b8c\u6210\uff0c\u8be5\u51fd\u6570\u53ef\u4ee5\u5b8c\u6210Session\u7684\u8bbe\u7f6e\u3001\u83b7\u53d6\u3001\u5220\u9664\u548c\u7ba1\u7406\u64cd\u4f5c\u3002<\/p>\n\n<h2>session\u521d\u59cb\u5316\u8bbe\u7f6e<\/h2>\n\n<p>\u5982\u679csession\u65b9\u6cd5\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u4f20\u5165\u6570\u7ec4\u5219\u8868\u793a\u8fdb\u884csession\u521d\u59cb\u5316\u8bbe\u7f6e\uff0c\u4f8b\u5982\uff1a<\/p>\n\n<pre><code>session(array('name'=&gt;'session_id','expire'=&gt;3600));\n<\/code><\/pre>\n\n<p>\u652f\u6301\u4f20\u5165\u7684session\u53c2\u6570\u5305\u62ec\uff1a\n<table>\n<thead>\n<tr>\n  <th>\u53c2\u6570\u540d<\/th>\n  <th>\u8bf4\u660e<\/th>\n<\/tr>\n<\/thead>\n<tbody>\n<tr>\n  <td>id<\/td>\n  <td>session_id\u503c<\/td>\n<\/tr>\n<tr>\n  <td>name<\/td>\n  <td>session_name \u503c<\/td>\n<\/tr>\n<tr>\n  <td>path<\/td>\n  <td>session_save_path \u503c<\/td>\n<\/tr>\n<tr>\n  <td>prefix<\/td>\n  <td>session \u672c\u5730\u5316\u7a7a\u95f4\u524d\u7f00<\/td>\n<\/tr>\n<tr>\n  <td>expire<\/td>\n  <td>session.gc_maxlifetime \u8bbe\u7f6e\u503c<\/td>\n<\/tr>\n<tr>\n  <td>domain<\/td>\n  <td>session.cookie_domain \u8bbe\u7f6e\u503c<\/td>\n<\/tr>\n<tr>\n  <td>use_cookies<\/td>\n  <td>session.use_cookies \u8bbe\u7f6e\u503c<\/td>\n<\/tr>\n<tr>\n  <td>use_trans_sid<\/td>\n  <td>session.use_trans_sid \u8bbe\u7f6e\u503c<\/td>\n<\/tr>\n<tr>\n  <td>type<\/td>\n  <td>session\u5904\u7406\u7c7b\u578b\uff0c\u652f\u6301\u9a71\u52a8\u6269\u5c55<\/td>\n<\/tr>\n<\/tbody>\n<\/table><\/p>\n\n<p>Session\u521d\u59cb\u5316\u8bbe\u7f6e\u65b9\u6cd5\u65e0\u9700\u624b\u52a8\u8c03\u7528\uff0c\u5728Think\\App\u7c7b\u7684\u521d\u59cb\u5316\u5de5\u4f5c\u7ed3\u675f\u540e\u4f1a\u81ea\u52a8\u8c03\u7528\uff0c\u901a\u5e38\u9879\u76ee\u53ea\u9700\u8981\u914d\u7f6e<code>SESSION_OPTIONS<\/code>\u53c2\u6570\u5373\u53ef\uff0c<code>SESSION_OPTIONS<\/code>\u53c2\u6570\u7684\u8bbe\u7f6e\u662f\u4e00\u4e2a\u6570\u7ec4\uff0c\u652f\u6301\u7684\u7d22\u5f15\u540d\u548c\u524d\u9762\u7684session\u521d\u59cb\u5316\u53c2\u6570\u76f8\u540c\u3002<\/p>\n\n<p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u521d\u59cb\u5316\u4e4b\u540e\u7cfb\u7edf\u4f1a\u81ea\u52a8\u542f\u52a8session\uff0c\u5982\u679c\u4e0d\u5e0c\u671b\u7cfb\u7edf\u81ea\u52a8\u542f\u52a8session\u7684\u8bdd\uff0c\u53ef\u4ee5\u8bbe\u7f6e<code>SESSION_AUTO_START<\/code>\u4e3afalse\uff0c\u4f8b\u5982\uff1a<\/p>\n\n<pre><code>'SESSION_AUTO_START' =&gt;false\n<\/code><\/pre>\n\n<p>\u5173\u95ed\u81ea\u52a8\u542f\u52a8\u540e\u53ef\u4ee5\u9879\u76ee\u7684\u516c\u5171\u6587\u4ef6\u6216\u8005\u5728\u63a7\u5236\u5668\u4e2d\u901a\u8fc7\u624b\u52a8\u8c03\u7528<code>session_start<\/code>\u6216\u8005<code>session('[start]')<\/code>\u542f\u52a8session\u3002<\/p>\n\n<h2>session\u8d4b\u503c<\/h2>\n\n<p>Session\u8d4b\u503c\u6bd4\u8f83\u7b80\u5355\uff0c\u76f4\u63a5\u4f7f\u7528\uff1a<\/p>\n\n<pre><code>session('name','value');  \/\/\u8bbe\u7f6esession\n<\/code><\/pre>\n\n<p>3.2.3\u7248\u672c\u5f00\u59cb\uff0csession\u8d4b\u503c\u64cd\u4f5c\u652f\u6301\u4e8c\u7ef4\uff0c\u4f8b\u5982\uff1a<\/p>\n\n<pre><code>session('user.user_id',10);  \/\/\u8bbe\u7f6esession\n<\/code><\/pre>\n\n<h2>session\u53d6\u503c<\/h2>\n\n<p>Session\u53d6\u503c\u4f7f\u7528\uff1a<\/p>\n\n<pre><code>$value = session('name');\n\/\/ \u83b7\u53d6\u6240\u6709\u7684session 3.2.2\u7248\u672c\u65b0\u589e\n$value = session();\n<\/code><\/pre>\n\n<p>3.2.3\u7248\u672c\u5f00\u59cb\u652f\u6301\u4e8c\u7ef4\u6570\u7ec4\u53d6\u503c\uff0c\u4f8b\u5982\uff1a<\/p>\n\n<pre><code>$value = session('user.user_id');\n<\/code><\/pre>\n\n<h2>session\u5220\u9664<\/h2>\n\n<p>\u5220\u9664\u67d0\u4e2asession\u7684\u503c\u4f7f\u7528\uff1a<\/p>\n\n<pre><code>session('name',null); \/\/ \u5220\u9664name\n<\/code><\/pre>\n\n<p>3.2.3\u7248\u672c\u5f00\u59cb\u652f\u6301\u5220\u9664\u4e8c\u7ef4\u6570\u7ec4\uff0c\u4f8b\u5982\uff1a<\/p>\n\n<pre><code>session('user.user_id',null); \/\/ \u5220\u9664session\n<\/code><\/pre>\n\n<p>\u8981\u5220\u9664\u6240\u6709\u7684session\uff0c\u53ef\u4ee5\u4f7f\u7528\uff1a<\/p>\n\n<pre><code>session(null); \/\/ \u6e05\u7a7a\u5f53\u524d\u7684session\n<\/code><\/pre>\n\n<h2>session\u5224\u65ad<\/h2>\n\n<p>\u8981\u5224\u65ad\u4e00\u4e2asession\u503c\u662f\u5426\u5df2\u7ecf\u8bbe\u7f6e\uff0c\u53ef\u4ee5\u4f7f\u7528<\/p>\n\n<pre><code>\/\/ \u5224\u65ad\u540d\u79f0\u4e3aname\u7684session\u503c\u662f\u5426\u5df2\u7ecf\u8bbe\u7f6e\nsession('?name');\n<\/code><\/pre>\n\n<p>3.2.3\u7248\u672c\u5f00\u59cb\uff0c\u652f\u6301\u5224\u65ad\u4e8c\u7ef4\u6570\u7ec4\uff0c\u4f8b\u5982\uff1a<\/p>\n\n<pre><code>session('?user.user_id');\n<\/code><\/pre>\n\n<h2>session\u7ba1\u7406<\/h2>\n\n<p>session\u65b9\u6cd5\u652f\u6301\u4e00\u4e9b\u7b80\u5355\u7684session\u7ba1\u7406\u64cd\u4f5c\uff0c\u7528\u6cd5\u5982\u4e0b\uff1a<\/p>\n\n<h3>session('[\u64cd\u4f5c\u540d]');<\/h3>\n\n<p>\u652f\u6301\u7684\u64cd\u4f5c\u540d\u5305\u62ec\uff1a\n<table>\n<thead>\n<tr>\n  <th>\u64cd\u4f5c\u540d<\/th>\n  <th>\u542b\u4e49<\/th>\n<\/tr>\n<\/thead>\n<tbody>\n<tr>\n  <td>start<\/td>\n  <td>\u542f\u52a8session<\/td>\n<\/tr>\n<tr>\n  <td>pause<\/td>\n  <td>\u6682\u505csession\u5199\u5165<\/td>\n<\/tr>\n<tr>\n  <td>destroy<\/td>\n  <td>\u9500\u6bc1session<\/td>\n<\/tr>\n<tr>\n  <td>regenerate<\/td>\n  <td>\u91cd\u65b0\u751f\u6210session id<\/td>\n<\/tr>\n<\/tbody>\n<\/table><\/p>\n\n<p>\u4f7f\u7528\u793a\u4f8b\u5982\u4e0b\uff1a<\/p>\n\n<pre><code>session('[pause]'); \/\/ \u6682\u505csession\u5199\u5165\nsession('[start]'); \/\/ \u542f\u52a8session\nsession('[destroy]'); \/\/ \u9500\u6bc1session\nsession('[regenerate]'); \/\/ \u91cd\u65b0\u751f\u6210session id\n<\/code><\/pre>\n\n<h2>\u672c\u5730\u5316\u652f\u6301<\/h2>\n\n<p>\u5982\u679c\u5728\u521d\u59cb\u5316session\u8bbe\u7f6e\u7684\u65f6\u5019\u4f20\u5165<code>prefix<\/code>\u53c2\u6570\u6216\u8005\u5355\u72ec\u8bbe\u7f6e\u4e86<code>SESSION_PREFIX<\/code>\u53c2\u6570\u7684\u8bdd\uff0c\u5c31\u53ef\u4ee5\u542f\u7528\u672c\u5730\u5316session\u7ba1\u7406\u652f\u6301\u3002\u542f\u52a8\u672c\u5730\u5316session\u540e\uff0c\u6240\u6709\u7684\u8d4b\u503c\u3001\u53d6\u503c\u3001\u5220\u9664\u4ee5\u53ca\u5224\u65ad\u64cd\u4f5c\u90fd\u4f1a\u81ea\u52a8\u652f\u6301\u672c\u5730\u5316session\u3002<\/p>\n\n<p>\u672c\u5730\u5316session\u652f\u6301\u5f00\u542f\u540e\uff0c\u751f\u6210\u7684session\u6570\u636e\u683c\u5f0f\u7531\u539f\u6765\u7684\n<code>$_SESSION['name']<\/code> \u53d8\u6210 <code>$_SESSION['\u524d\u7f00']['name']<\/code>\u3002<\/p>\n\n<h2>session handler\u652f\u6301<\/h2>\n\n<p>\u521d\u59cb\u5316session\u8bbe\u7f6e\u7684\u65f6\u5019\u5982\u679c\u4f20\u5165\u4e86<code>type<\/code>\u53c2\u6570\u6216\u8005\u8bbe\u7f6e\u4e86<code>SESSION_TYPE<\/code>\u53c2\u6570\u7684\u8bdd\uff0c\u5219\u4f1a\u81ea\u52a8\u5f15\u5165\u5bf9\u5e94\u7684Session\u5904\u7406\u9a71\u52a8\uff0c\u9a71\u52a8\u76ee\u5f55\u4f4d\u4e8eLibrary\/Think\/Session\/Driver\u76ee\u5f55\u4e0b\u9762\uff08\u8be6\u89c1\u6269\u5c55\u90e8\u5206\uff09\u3002<\/p>\n","template":""}